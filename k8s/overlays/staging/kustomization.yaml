apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: eks-staging

resources:
  - ../../base/eks-cluster
  - ../../base/node-groups

namePrefix: staging-

commonLabels:
  environment: staging
  app.kubernetes.io/component: eks-cluster
  app.kubernetes.io/part-of: solidity-security-platform
  app.kubernetes.io/managed-by: kustomize

patches:
  - cluster-patch.yaml
  - node-group-patch.yaml

configMapGenerator:
  - name: cluster-staging-config
    literals:
      - cluster.environment=staging
      - cluster.name=solidity-security-eks-staging
      - cluster.region=us-west-2
      - node.group.desired.size=2
      - node.group.max.size=4
      - node.group.min.size=1
      - node.group.instance.types=t3.medium,t3.large