apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: eks-production

resources:
  - ../../base/eks-cluster
  - ../../base/node-groups

namePrefix: production-

commonLabels:
  environment: production
  app.kubernetes.io/component: eks-cluster
  app.kubernetes.io/part-of: solidity-security-platform
  app.kubernetes.io/managed-by: kustomize

patches:
  - cluster-patch.yaml
  - node-group-patch.yaml

configMapGenerator:
  - name: cluster-production-config
    literals:
      - cluster.environment=production
      - cluster.name=solidity-security-eks-production
      - cluster.region=us-west-2
      - node.group.desired.size=3
      - node.group.max.size=10
      - node.group.min.size=2
      - node.group.instance.types=t3.large,t3.xlarge,m5.large
      - cluster.high.availability=true
      - cluster.multi.az=true