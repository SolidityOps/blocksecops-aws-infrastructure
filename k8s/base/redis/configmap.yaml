apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-config
data:
  redis.conf: |
    # Redis Configuration for Local Development
    bind 0.0.0.0
    port 6379

    # Enable password authentication (password set via env var)
    # requirepass will be set via command line

    # Memory management
    maxmemory 200mb
    maxmemory-policy allkeys-lru

    # Persistence (disabled for local development)
    save ""

    # Logging
    loglevel notice

    # Security
    protected-mode yes

    # Performance
    tcp-keepalive 300
    timeout 0

    # Disable potentially dangerous commands
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
    rename-command SHUTDOWN REDIS_SHUTDOWN

    # Enable keyspace notifications for session management
    notify-keyspace-events Ex